/**
 * Performance test script for toEnglish()
 *
 * - Translates 50 Japanese sentences into English
 * - Measures per-translation latency
 * - Calculates average translation time
 *
 * Run with:
 *   npx tsx -r dotenv/config src/scripts/test-toEnglish.ts
 */

import { toEnglish } from "@/lib/ads/deciders/toEnglish";

const TEST_SENTENCES = [
  "沖縄のビーチはとても美しく、毎年多くの観光客が国内外から訪れています。",
  "来月、仕事の都合で大阪へ出張する予定ですが、新幹線とホテルの予約がまだできていません。",
  "最近はリモートワークが一般的になり、自宅で仕事をする時間が以前よりも増えました。",
  "新しいプログラミング言語を学ぶことは簡単ではありませんが、将来のキャリアに役立つと考えています。",
  "このカフェは落ち着いた雰囲気で、週末には多くの人が読書や作業をしに訪れます。",
  "長時間のフライトの後は、できるだけ早くホテルにチェックインして休憩したいです。",
  "日本では四季がはっきりしており、季節ごとに異なる自然の美しさを楽しむことができます。",
  "人工知能の進化によって、私たちの生活や働き方は大きく変わりつつあります。",
  "最近は健康のために毎朝30分ほど散歩をするように心がけています。",
  "週末には友人と一緒に映画を見たり、レストランで食事をしたりすることが多いです。",

  "海外旅行に行く際には、事前に現地の文化やマナーを調べておくことが重要です。",
  "このアプリは使いやすいデザインで、初めて使う人でも直感的に操作できます。",
  "仕事の生産性を上げるために、タスク管理ツールを導入することを検討しています。",
  "最近購入したノートパソコンは性能が高く、動画編集も快適に行えます。",
  "家族と過ごす時間を大切にするため、平日はできるだけ早く仕事を終えるようにしています。",
  "新しいレシピに挑戦するのは楽しいですが、材料を揃えるのが少し大変です。",
  "この街は公共交通機関が充実しているため、車がなくても生活しやすいです。",
  "オンライン会議が増えたことで、対面でのコミュニケーションの重要性を再認識しました。",
  "将来のために毎月少しずつ貯金をするように心がけています。",
  "天気予報によると、明日は雨が降る可能性が高いそうです。",

  "新しいプロジェクトを成功させるためには、チーム内での情報共有が欠かせません。",
  "最近は動画配信サービスで海外ドラマを見るのが楽しみの一つです。",
  "このスマートフォンはバッテリーの持ちが良く、外出時も安心して使えます。",
  "仕事とプライベートのバランスを保つことは、長期的に見てとても重要です。",
  "初めて訪れた京都では、歴史的な建物や美しい庭園に感動しました。",
  "日々の運動不足を解消するために、ジムに通うことを検討しています。",
  "新しい技術トレンドを追いかけるのは大変ですが、とても刺激的です。",
  "このレストランは予約が取りにくいことで有名ですが、一度は行ってみたいと思っています。",
  "長期的な目標を立てることで、日々の行動に目的意識を持つことができます。",
  "最近は電子書籍を利用することが増え、紙の本を読む機会が減りました。",

  "仕事で使うツールを見直すことで、作業効率が大幅に改善されました。",
  "休日には自然の中でリラックスすることで、心身ともにリフレッシュできます。",
  "新しい言語を学ぶことで、異文化理解が深まると感じています。",
  "このプロジェクトはスケジュールが厳しいため、計画的に進める必要があります。",
  "最近は健康志向の高まりから、バランスの取れた食事を意識しています。",
  "最近は在宅勤務が続いているため、仕事用のデスクや椅子の環境を見直そうと考えています。",
  "将来的に海外で働く可能性もあるので、英語力を少しずつでも向上させたいと思っています。",
  "このサービスは料金体系が分かりやすく、初めて利用する人にも親切だと感じました。",
  "プロジェクトの進捗を把握するために、定期的なミーティングを設けることが重要です。",
  "新しくオープンしたショッピングモールには、話題のレストランやショップが多く入っています。",

  "忙しい毎日の中でも、意識的に休憩時間を取ることで集中力を保つことができます。",
  "最近購入したワイヤレスイヤホンは音質が良く、通勤時間が快適になりました。",
  "旅行の計画を立てる際には、移動時間や現地でのスケジュールを事前に整理しています。",
  "この本は内容が分かりやすく、初心者でも理解しやすい構成になっています。",
  "健康診断の結果をきっかけに、食生活や運動習慣を見直すことにしました。",
  "新しいチームに配属されてから、コミュニケーションの取り方を工夫するようになりました。",
  "クラウドサービスを活用することで、データの管理や共有が以前よりも簡単になりました。",
  "長期的な視点でキャリアを考えることは、日々の選択に大きな影響を与えます。",
  "このイベントはオンラインで開催されるため、場所を問わず参加できるのが魅力です。",
  "最近はニュースをスマートフォンで読むことが多く、紙の新聞を取らなくなりました。",
];

async function run() {
  console.log("== toEnglish translation performance test ==");
  console.log(`Total sentences: ${TEST_SENTENCES.length}\n`);

  const durations: number[] = [];

  for (let i = 0; i < TEST_SENTENCES.length; i++) {
    const text = TEST_SENTENCES[i];

    const start = performance.now();
    const translated = await toEnglish(text, "jpn");
    const end = performance.now();

    const durationMs = end - start;
    durations.push(durationMs);

    console.log(`--- Test ${i + 1} ---`);
    console.log("Original   :", text);
    console.log("Translated :", translated);
    console.log(`Time       : ${durationMs.toFixed(2)} ms\n`);
  }

  const total = durations.reduce((sum, t) => sum + t, 0);
  const average = total / durations.length;

  console.log("== Summary ==");
  console.log(`Average translation time: ${average.toFixed(2)} ms`);
}

run().catch((err) => {
  console.error("Test failed:", err);
  process.exit(1);
});
